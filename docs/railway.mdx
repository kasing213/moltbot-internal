---
title: Deploy on Railway
---

Deploy Moltbot on Railway with a one-click template and finish setup in your browser.
This is the easiest “no terminal on the server” path: Railway runs the Gateway for you,
and you configure everything via the `/setup` web wizard.

## Quick checklist (new users)

1) Click **Deploy on Railway** (below).
2) Add a **Volume** mounted at `/data`.
3) Set the required **Variables** (at least `SETUP_PASSWORD`).
4) Enable **HTTP Proxy** on port `8080`.
5) Open `https://<your-railway-domain>/setup` and finish the wizard.

## One-click deploy

<a href="https://railway.com/deploy/moltbot-railway-template" target="_blank" rel="noreferrer">Deploy on Railway</a>

After deploy, find your public URL in **Railway → your service → Settings → Domains**.

Railway will either:
- give you a generated domain (often `https://<something>.up.railway.app`), or
- use your custom domain if you attached one.

Then open:

- `https://<your-railway-domain>/setup` — setup wizard (password protected)
- `https://<your-railway-domain>/moltbot` — Control UI

## What you get

- Hosted Moltbot Gateway + Control UI
- Web setup wizard at `/setup` (no terminal commands)
- Persistent storage via Railway Volume (`/data`) so config/credentials/workspace survive redeploys
- Backup export at `/setup/export` to migrate off Railway later

## Required Railway settings

### Public Networking

Enable **HTTP Proxy** for the service.

- Port: `8080`

### Volume (required)

Attach a volume mounted at:

- `/data`

### Variables

Set these variables on the service:

- `SETUP_PASSWORD` (required)
- `PORT=8080` (required — must match the port in Public Networking)
- `CLAWDBOT_STATE_DIR=/data/.clawdbot` (recommended)
- `CLAWDBOT_WORKSPACE_DIR=/data/workspace` (recommended)
- `CLAWDBOT_GATEWAY_TOKEN` (recommended; treat as an admin secret)

## Setup flow

1) Visit `https://<your-railway-domain>/setup` and enter your `SETUP_PASSWORD`.
2) Choose a model/auth provider and paste your key.
3) (Optional) Add Telegram/Discord/Slack tokens.
4) Click **Run setup**.

If Telegram DMs are set to pairing, the setup wizard can approve the pairing code.

## Getting chat tokens

### Telegram bot token

1) Message `@BotFather` in Telegram
2) Run `/newbot`
3) Copy the token (looks like `123456789:AA...`)
4) Paste it into `/setup`

### Discord bot token

1) Go to https://discord.com/developers/applications
2) **New Application** → choose a name
3) **Bot** → **Add Bot**
4) **Enable MESSAGE CONTENT INTENT** under Bot → Privileged Gateway Intents (required or the bot will crash on startup)
5) Copy the **Bot Token** and paste into `/setup`
6) Invite the bot to your server (OAuth2 URL Generator; scopes: `bot`, `applications.commands`)

## Backups & migration

Download a backup at:

- `https://<your-railway-domain>/setup/export`

This exports your Moltbot state + workspace so you can migrate to another host without losing config or memory.

## Troubleshooting

### WebSocket error 1008: "pairing required" or "token mismatch"

This happens when the Control UI can't authenticate with the gateway. Railway's reverse proxy
setup requires special configuration.

**Fix:** The `railway.toml` start command automatically enables `gateway.controlUi.allowInsecureAuth`
which allows token-only authentication without device pairing.

If you still see this error:

1. **Clear browser localStorage:**
   - Open DevTools (F12) → Application → Local Storage
   - Delete entries for your Railway domain
   - Refresh the page

2. **Use tokenized URL:**
   ```
   https://<your-railway-domain>/moltbot?token=YOUR_CLAWDBOT_GATEWAY_TOKEN
   ```

3. **Verify token matches:**
   - The token in the URL must exactly match `CLAWDBOT_GATEWAY_TOKEN` in Railway Variables

### Telegram 409 conflict: "terminated by other getUpdates request"

Only one bot instance can poll Telegram at a time. This error appears when:

- A previous Railway deployment is still running
- A local development instance is polling the same bot
- Multiple Railway replicas are configured

**Fix:**

1. Ensure Railway service has exactly **1 replica** (Settings → Scaling)
2. Stop any local `moltbot gateway` instances
3. For production, consider switching to **webhook mode**:
   ```json
   {
     "channels": {
       "telegram": {
         "webhookUrl": "https://<your-railway-domain>/telegram-webhook"
       }
     }
   }
   ```

### Health check failing

If Railway shows health check failures:

1. Verify `PORT=8080` is set in Variables
2. Verify HTTP Proxy is enabled on port `8080`
3. Check deployment logs for startup errors

### Control UI shows "Schema unavailable"

This usually means the WebSocket connection failed. Follow the "pairing required" fix above.

## Complete variable reference

| Variable | Required | Example | Description |
|----------|----------|---------|-------------|
| `SETUP_PASSWORD` | Yes | `mysecretpass` | Password for `/setup` wizard |
| `PORT` | Yes | `8080` | Must match HTTP Proxy port |
| `CLAWDBOT_GATEWAY_TOKEN` | Recommended | `openssl rand -hex 32` | Gateway auth token |
| `CLAWDBOT_STATE_DIR` | Recommended | `/data/.clawdbot` | Persistent config location |
| `CLAWDBOT_WORKSPACE_DIR` | Recommended | `/data/workspace` | Agent workspace location |
| `CLAWDBOT_TRUSTED_PROXIES` | Optional | `10.0.0.0/8,172.16.0.0/12` | Railway internal proxy CIDRs |
| `TELEGRAM_BOT_TOKEN` | Optional | `123:ABC...` | Telegram bot token |
| `OPENROUTER_API_KEY` | Optional | `sk-or-...` | OpenRouter API key |

## railway.toml reference

The start command runs three steps:

1. **Onboard:** Non-interactive setup with OpenRouter
2. **Doctor:** Auto-fix configuration issues
3. **Config:** Enable `allowInsecureAuth` for Control UI
4. **Gateway:** Start with LAN binding and token auth

```toml
[build]
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "sh -c 'node dist/index.js onboard ... && node dist/index.js doctor --fix --yes && node dist/index.js config set gateway.controlUi.allowInsecureAuth true && node dist/index.js gateway --bind lan --port ${PORT:-8080} --token ${CLAWDBOT_GATEWAY_TOKEN}'"
healthcheckPath = "/health"
healthcheckTimeout = 120
```
